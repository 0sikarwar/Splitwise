(this.webpackJsonpsplitwise=this.webpackJsonpsplitwise||[]).push([[0],{43:function(e,n,t){},48:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t(23),c=t.n(r),i=t(16),s=(t(43),t(17)),o=t(22),l=t(9),d="ADD_FRIEND",u="ADD_FRIEND_SUCCESS",b="ADD_FRIEND_FAILURE",j="GET_ALL_FRIENDS",f="GET_ALL_FRIENDS_SUCCESS",m=function(e){return{type:d,friend:e}},O=function(e){return{type:u,friends:e}},p=function(e){return{type:b,err:e}},h=function(){return{type:j}},x=function(e){return{type:f,friends:e}};var v=t(15),g="ADD_BILL",N="GET_ALL_BILL",y="GET_ALL_BILL_SUCCESS",w=function(e){return{type:y,bills:e}};var S=Object(s.b)({friends:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{friendsList:[]},n=arguments.length>1?arguments[1]:void 0;switch(n.type){case u:return Object(l.a)(Object(l.a)({},e),{},{friendsList:n.friends});case b:return Object(l.a)(Object(l.a)({},e),{},{addFriendErr:n.err});case f:return Object(l.a)(Object(l.a)({},e),{},{friendsList:n.friends});default:return e}},bills:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{billsList:[]},n=arguments.length>1?arguments[1]:void 0;switch(n.type){case g:return Object(l.a)(Object(l.a)({},e),{},{billsList:[].concat(Object(v.a)(e.billsList),[n.bill])});case y:return Object(l.a)(Object(l.a)({},e),{},{billsList:n.bills});default:return e}}}),C=t(7),k=t.n(C),_=t(30),A=t(31),E=t(6),L=new(function(){function e(){Object(_.a)(this,e);var n=o.a.expanding(10);this.sagasWithArguments=Object(o.b)(n)}return Object(A.a)(e,[{key:"addSagaToRoot",value:function(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];this.sagasWithArguments.put([].concat(n))}},{key:"getRootSaga",value:function(){var e=this.sagasWithArguments;return k.a.mark((function n(){var t,a;return k.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(E.b)(e);case 2:return t=n.sent,n.next=5,Object(E.a)(t.map((function(e){return E.c.apply(void 0,Object(v.a)(e))})));case 5:return n.next=8,Object(E.e)(e);case 8:return a=n.sent,n.next=11,E.c.apply(void 0,Object(v.a)(a));case 11:n.next=5;break;case 13:case"end":return n.stop()}}),n)}))}}]),e}()),D=Object(o.c)(),F=s.c;window&&(F=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||s.c);var T="TEST",I=k.a.mark(B);function B(e){return k.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:console.log("ACTION FIRED ",e.val);case 1:case"end":return n.stop()}}),I)}L.addSagaToRoot(k.a.mark((function e(){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(E.a)([Object(E.f)(T,B)]);case 2:case"end":return e.stop()}}),e)})));var M=function(e,n){return!!window.localStorage&&(localStorage.setItem(e,JSON.stringify(n)),!0)},R=function(e){if(window.localStorage){var n=localStorage.getItem(e);return JSON.parse(n)}return!1},P=function(e){if(e instanceof Date)return!1;if(null==e)return!0;var n,t=function(e){return"[object Number]"===Object.prototype.toString.call(e)};if(t(e))return t(n=e)&&"NaN"===n.toString();if(e.length>0)return!1;if(0===e.length)return!0;if("object"!==typeof e)return!0;for(var a=Object.keys(e),r=0,c=a[r];r<a.length;r+=1)if(hasOwnProperty.call(e,c))return!1;return!0},H=function(e,n){return e.reduce((function(e,n){return e&&e[n]?e[n]:null}),n)},U=k.a.mark(J),G=k.a.mark(W);function J(e){var n,t,a,r,c,i,s,o;return k.a.wrap((function(l){for(;;)switch(l.prev=l.next){case 0:if(n=R("bills")||[],t=R("friends")||[],a=e.bill,r=a.friendsInBill,c=a.billAmount,i=a.personCount,s=Math.round(c/(i+1)),o=t.map((function(e,n){var t=r.findIndex((function(n){return n.id===e.id}));return t>-1&&(e.owe=s-r[t].paid+(e.owe||0),r[t].isExisting=!0),e})),r.forEach((function(e,n){r[n].isExisting||(e.id=(new Date).getTime()+n,o.push({name:e.name,owe:s-e.paid,id:e.id,temp:!0}))})),!M("friends",o)){l.next=13;break}return l.next=10,Object(E.d)(O(o));case 10:console.log("FRIENDS UPDATED"),l.next=14;break;case 13:console.log("FRIENDS UPDATE FAILED");case 14:n.push(a),M("bills",n)?console.log("ADDED"):console.log("FAILED");case 16:case"end":return l.stop()}}),U)}function W(){var e;return k.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e=R("bills")||[],P(e)){n.next=6;break}return n.next=4,Object(E.d)(w(e));case 4:n.next=7;break;case 6:console.log("bills not found");case 7:case"end":return n.stop()}}),G)}L.addSagaToRoot(k.a.mark((function e(){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(E.a)([Object(E.f)(g,J)]);case 2:return e.next=4,Object(E.a)([Object(E.f)(N,W)]);case 4:case"end":return e.stop()}}),e)})));var X=k.a.mark(Y),V=k.a.mark(q);function Y(e){var n,t,a,r,c;return k.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(n=R("friends")||[],t=e.friend,a=n.findIndex((function(e){return e.id===t.id})),r=n.find((function(e){return!e.temp&&e.name===t.name||e.email===t.email})),c="",!r){i.next=11;break}return c="Name or Email Existing",i.next=9,Object(E.d)(p(c));case 9:i.next=21;break;case 11:if(a>-1?n[a]=t:n.push(t),!M("friends",n)){i.next=18;break}return i.next=15,Object(E.d)(O(n));case 15:console.log("ADDED"),i.next=21;break;case 18:return i.next=20,Object(E.d)(p(c));case 20:console.log("FAILED");case 21:case"end":return i.stop()}}),X)}function q(){var e;return k.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e=R("friends")||[],P(e)){n.next=6;break}return n.next=4,Object(E.d)(x(e));case 4:n.next=7;break;case 6:console.log("Friends not found");case 7:case"end":return n.stop()}}),V)}L.addSagaToRoot(k.a.mark((function e(){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(E.a)([Object(E.f)(d,Y),Object(E.f)(j,q)]);case 2:case"end":return e.stop()}}),e)})));var z=t(18),K=t(8),Q=t(13),Z=t(2),$="body--modal-open",ee=function(e){return Object(a.useEffect)((function(){return document.body.classList.add($),function(){document.body.classList.remove($)}}),[]),Object(Z.jsx)("div",{className:"Overlay",onClick:e.onClick,children:e.children})};ee.defaultProps={children:null,onClick:function(e){},bottom:!1},ee.displayName="Overlay";var ne=ee,te=t(32),ae=t.n(te),re=function(e){var n=e.type,t=e.primaryButton,a=e.secondaryButton,r=e.bottom,c=e.className,i=ae()(c);return Object(Z.jsxs)("div",{className:"Modal "+(r?"w-100p p-absolute b-0 Modal__bottom ":"")+i,children:[Object(Z.jsxs)("div",{className:"Modal__content "+("renderProp"===n?"pt-0 pb-0 pl-0 pr-0":""),children:["renderProp"!==n?Object(Z.jsx)("h1",{className:"Modal__heading",children:e.title}):"","renderProp"===n?e.children:Object(Z.jsx)("p",{className:"Modal__copy",children:e.message})]}),r?"":Object(Z.jsxs)("div",{className:"Modal__actions",children:[t&&Object(Z.jsx)("a",{className:"Modal__action Modal__action--primary",onClick:function(){e.onPrimaryAction()},children:t}),a&&Object(Z.jsx)("a",{className:"Modal__action",onClick:function(){e.onSecondaryAction()},children:a})]})]})};re.defaultProps={type:"info",onPrimaryAction:function(){},onSecondaryAction:function(){},title:"",message:"",primaryButton:"",secondaryButton:"",bottom:!1};var ce=re,ie=t(35),se=["onSubmit","button","buttonClassName","label","labelClassName","onChange","className"],oe=function(e){var n=e.onSubmit,t=e.button,a=e.buttonClassName,r=e.label,c=e.labelClassName,i=e.onChange,s=e.className,o=Object(ie.a)(e,se);return Object(Z.jsxs)("div",{className:"inputBox",children:[r&&Object(Z.jsx)("label",{className:c,children:r}),Object(Z.jsx)("input",Object(l.a)(Object(l.a)({className:s},o),{},{onChange:function(e){var n=e.currentTarget.value,t=e.currentTarget.name;i(n,t)}})),n&&Object(Z.jsx)("button",{onClick:n,className:a,children:t})]})};oe.defaultProps={label:"",className:"",onChange:function(){},value:"",labelClassName:"",button:"submit",onSubmit:null,buttonClassName:"",type:"text",placeholder:"",name:""};var le=oe,de=function(e){var n=e.friendToAdd,t=(n||{}).name,r=Object(a.useState)(t||""),c=Object(Q.a)(r,2),i=c[0],s=c[1],o=Object(a.useState)(""),l=Object(Q.a)(o,2),d=l[0],u=l[1],b=function(e,n){"friendName"===n?s(e):"email"===n&&u(e)};return Object(Z.jsxs)("div",{children:[Object(Z.jsx)(le,{placeholder:"Name",value:i,label:"Name",onChange:b,name:"friendName"}),Object(Z.jsx)(le,{placeholder:"Email Id",value:d,label:"Email",onChange:b,name:"email"}),Object(Z.jsxs)("div",{children:[Object(Z.jsx)("button",{className:"bg-primary hover-primary ".concat(e.handleCancel?"":"ml-80"),onClick:function(t){t.preventDefault();var a=(n||{}).id||(new Date).getTime();e.addFriend({name:i,email:d,id:a,owe:(n||{}).owe||0,temp:!1}),e.goToHome&&e.goToHome(),console.log(i,d)},children:"Add Friend"}),e.handleCancel&&Object(Z.jsx)("button",{className:"bg-primary hover-primary ml-20",onClick:e.handleCancel,children:"cancel"})]})]})},ue=function(e){var n=Object(a.useState)(!1),t=Object(Q.a)(n,2),r=t[0],c=t[1],i=Object(a.useState)({}),s=Object(Q.a)(i,2),o=s[0],l=s[1],d=e.friends,u=e.addFriend,b=e.friendBillNameMap,j=0,f=0;return Object(Z.jsxs)(Z.Fragment,{children:[Object(Z.jsx)("div",{children:Object(Z.jsxs)("ul",{className:"list",children:[d.map((function(e,n){var t,a;return e.owe>=0?(t="t-green",a="Owes you",j+=Math.abs(e.owe)):(t="t-red",a="You owe",f+=Math.abs(e.owe)),Object(Z.jsxs)("li",{className:"listItem",children:[Object(Z.jsx)("span",{children:e.name}),Object(Z.jsxs)("div",{className:"flex ".concat(t),children:[Object(Z.jsx)("span",{children:a}),Object(Z.jsx)("span",{children:Math.abs(e.owe)||0})]}),b[e.id]&&Object(Z.jsxs)("span",{children:["Bills: ",b[e.id].join(", ")]}),e.temp&&Object(Z.jsx)("button",{className:"",onClick:function(){!function(e){c(!r),l(e)}(e)},children:"Add as friend"})]},n)})),Object(Z.jsxs)("li",{children:[Object(Z.jsx)("span",{className:"w-240",children:"Total amount you will get "}),Object(Z.jsx)("span",{className:"t-green",children:j})]}),Object(Z.jsxs)("li",{children:[Object(Z.jsx)("span",{className:"w-240",children:"Total amount you need to give "}),Object(Z.jsx)("span",{className:"t-red",children:f})]})]})}),r&&Object(Z.jsx)(ne,{children:Object(Z.jsx)(ce,{type:"renderProp",children:Object(Z.jsx)(de,{friendToAdd:o,addFriend:function(e){c(!r),u(e)},handleCancel:function(){c(!1)}})})})]})},be=function(e){e.heading;var n=e.history,t=n.location.pathname,a="t-primary pl-10 pr-10 ml-2 mr-2 h-32 flex flex-center flex-row flex-middle hover-primary",r="bg-secondary disabled";return Object(Z.jsxs)("div",{className:"h-32 bg-primary flex",children:[Object(Z.jsx)(z.b,{className:"".concat(a," t-hx2 t-tertiary"),onClick:function(){n.goBack()},to:"",children:"<"}),Object(Z.jsx)(z.b,{className:"".concat(a," ").concat("/"===t&&r),to:"/",children:"Home"}),Object(Z.jsx)(z.b,{className:"".concat(a,"  ").concat("/bills"===t&&r),to:"/bills",children:"Add Bill"}),Object(Z.jsx)(z.b,{className:"".concat(a,"  ").concat("/friends"===t&&r),to:"/friends",children:"Add friends"})]})},je=Object(i.b)((function(e){return{friends:H(["friends","friendsList"],e),bills:H(["bills","billsList"],e)}}),{getAllFriends:h,addFriend:m})((function(e){var n=e.friends,t=e.addFriend,a=e.history,r=e.bills,c={};return r.forEach((function(e){e.friendsInBill&&e.friendsInBill.forEach((function(n){c[n.id]=c[n.id]||[],c[n.id].push(e.billName)}))})),Object(Z.jsxs)("div",{children:[Object(Z.jsx)(be,{history:a}),Object(Z.jsx)(ue,{friends:n||[],addFriend:t,friendBillNameMap:c||{}})]})})),fe=function(e){var n=e.list,t=e.inputName;return Object(Z.jsx)("ul",{className:"list mt-0 pt-0 pl-0 mb-0 pb-0 pr-0",children:n.map((function(a,r){return Object(Z.jsx)("li",{className:"listItem pl-15",onClick:function(){!function(a){e.onSelect(n[a].name,t,n[a].id)}(r)},children:a.name})}))})},me=function(e){var n={name:"",paid:""},t=Object(a.useState)(""),r=Object(Q.a)(t,2),c=r[0],i=r[1],s=Object(a.useState)(),o=Object(Q.a)(s,2),d=o[0],u=o[1],b=Object(a.useState)(0),j=Object(Q.a)(b,2),f=j[0],m=j[1],O=Object(a.useState)([n]),p=Object(Q.a)(O,2),h=p[0],x=p[1],g=Object(a.useState)(""),N=Object(Q.a)(g,2),y=N[0],w=N[1],S=Object(a.useState)([]),C=Object(Q.a)(S,2),k=C[0],_=C[1],A=function(n,t){var a,r,c,s,o,d=t.split("_")[0];switch("friend"!==d&&"paid"!==d||(r=t.split("_")[1],"friend"===d&&(w(t),_((c=n,s=e.friendsList,o="name",s.filter((function(e,n){return-1!==e[o].indexOf(c)})))),n||_([])),a=Object(v.a)(h)),d){case"billName":i(n);break;case"billAmount":u(parseInt(n));break;case"personCount":if(!n||n<0){m(0);break}m(parseInt(n));break;case"friend":E(n,t);break;case"paid":a[r]=Object(l.a)(Object(l.a)({},a[r]),{},{paid:parseInt(n)}),x(a)}},E=function(e,n,t){var a=Object(v.a)(h),r=n.split("_")[1];a[r]=Object(l.a)(Object(l.a)({},a[r]),{},{name:e,id:t}),x(a)},L=function(e,n,t){E(e,n,t),_([])},D=Object(v.a)(h),F=h.length;F<f?(D.push.apply(D,Object(v.a)(Array(f-F).fill(n))),x(D)):F>f&&(D.splice(f-F),x(D));var T=Object(v.a)(Array(f).keys()),I=function e(n){_([]),document.removeEventListener("click",e)},B=function(e){e.target.focus(),document.addEventListener("click",I)};return Object(Z.jsxs)("div",{children:[Object(Z.jsx)(le,{label:"Bill name",onChange:A,value:c,name:"billName"}),Object(Z.jsxs)("div",{className:"flex",children:[Object(Z.jsx)(le,{placeholder:"Amount",onChange:A,value:d,name:"billAmount",type:"number",className:"maxw-115",label:"Bill details"}),Object(Z.jsx)(le,{placeholder:"Person Count",onChange:A,value:f||"",name:"personCount",type:"number",className:"maxw-85"})]}),T.map((function(e,n){return Object(Z.jsxs)("div",{className:"p-relative mt--15",children:[Object(Z.jsx)(le,{label:"Friend ".concat(n+1),name:"friend_".concat(n),onChange:A,value:D[n].name,onFocus:B}),!P(k)&&y==="friend_".concat(n)&&Object(Z.jsx)("div",{className:"autocompleteDiv",children:Object(Z.jsx)(fe,{inputName:y,list:k,onSelect:L})}),Object(Z.jsx)(le,{placeholder:"Amount Paid",name:"paid_".concat(n),onChange:A,value:D[n].paid,className:"maxw-115 p-absolute  b-20",type:"number",label:" "})]},n)})),Object(Z.jsx)("button",{className:"bg-primary hover-primary ml-80",onClick:function(){console.log(c,d);var n={billName:c,billAmount:d,personCount:f,friendsInBill:h,id:(new Date).getTime()};e.addBill(n),e.goToHome()},children:"Create Bill"})]})},Oe=function(e){return Object(Z.jsx)("div",{children:Object(Z.jsx)(me,{addBill:e.addBill,friendsList:e.friendsList,goToHome:e.goToHome})})},pe=Object(i.b)((function(e){return{friends:H(["friends","friendsList"],e)}}),{addBill:function(e){return{type:g,bill:e}}})((function(e){var n=e.addBill,t=(e.addFriend,e.history);return Object(Z.jsxs)("div",{children:[Object(Z.jsx)(be,{history:t}),Object(Z.jsx)(Oe,{addBill:n,friendsList:e.friends,goToHome:function(){t.push("/")}})]})})),he=t(34),xe=function(e){var n=e.addFriend,t=e.goToHome;return Object(Z.jsx)("div",{children:Object(Z.jsx)(de,{addFriend:n,goToHome:t})})},ve=Object(i.b)((function(e){Object(he.a)(e)}),{addFriend:m})((function(e){var n=e.addFriend,t=e.history;return Object(Z.jsxs)("div",{children:[Object(Z.jsx)(be,{history:t}),Object(Z.jsx)(xe,{addFriend:n,goToHome:function(){t.push("/")}})]})})),ge=function(){return Object(Z.jsx)(z.a,{children:Object(Z.jsxs)(K.c,{children:[Object(Z.jsx)(K.a,{exact:!0,path:"/",component:je}),Object(Z.jsx)(K.a,{exact:!0,path:"/bills",component:pe}),Object(Z.jsx)(K.a,{exact:!0,path:"/friends",component:ve})]})})},Ne=Object(i.b)((function(e){return{friends:H(["friends","friendsList"],e),bills:H(["bills","billsList"],e)}}),{getAllFriends:h,getAllBills:function(){return{type:N}}})((function(e){var n=e.friends,t=e.bills;return Object(a.useEffect)((function(){P(n)&&e.getAllFriends(),P(t)&&e.getAllBills()})),null})),ye=function(e){var n=F(Object(s.a)(D))(s.d)(S,e);return D.run(L.getRootSaga()),n}();c.a.render(Object(Z.jsxs)(i.a,{store:ye,children:[Object(Z.jsx)(Ne,{}),Object(Z.jsx)(ge,{})]}),document.getElementById("root"))}},[[48,1,2]]]);
//# sourceMappingURL=main.7978b7ff.chunk.js.map